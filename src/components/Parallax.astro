---
import moon from '~/assets/moon.png'
import mountain from '~/assets/mountain.png'
import sea from '~/assets/sea.png'
import plain from '~/assets/plain.png'
---

<gg-splash-parallax>
	<img src={moon} class="moon" />
	<img src={sea} class="sea"/>
	<img src={mountain} class="mountain" />
	<img src={plain} class="plain" />
</gg-splash-parallax>

<style lang="scss">
	img {
		@apply pointer-events-none;
		@apply absolute top-0 left-0 w-full h-full object-cover;

		&.moon {
			@apply mix-blend-screen;
		}
	}
</style>

<script>
	class SplashParallax extends HTMLElement
	{
		constructor()
		{
			super()

			const mountain = this.querySelector('img.mountain') as HTMLImageElement
			const moon = this.querySelector('img.moon') as HTMLImageElement

			const parallaxConfig = [
				{
					element: mountain,
					depth: 0.1,
				},
				{
					element: moon,
					depth: 0.2,
				},
			]

			parallaxConfig.forEach((config) =>
				{
					window.addEventListener('scroll', () =>
						{
							let value = window.scrollY
							config.element.style.top = value * config.depth + 'px'
						})
				})
		}
	}

	customElements.define('gg-splash-parallax', SplashParallax)
</script>
